<html>
    <head>
        <title>User Account</title>
        <link rel="stylesheet" href="style.css" defer>
        <script src="js/main.js" defer></script>
    </head>
    <body>
        <!--header -->
        <header id="header-footerbar">
            <h1>Your Account</h1>
        </header>
    
        <!-- navigation Bar -->
        <nav id="main-nav">
            <ul>
                <li><a href="projectmainpage.html">Home</a></li>
                <li><a href="About Page.html">About</a></li>
                <li><a href="Contact Us Page.html">Contact</a></li>
                <li><a href="settingPage.html">Settings</a></li>
                <li><a href="userAccount.html">Account</a></li>

                </ul>
                    </nav>
                    <div class="user-account">
                        <h2>User Account</h2>
                        <div class="container">
                            <div class="box">
                                <h3>Saved Products</h3>
                                <div class="content saved-content"></div>
                                <br>
                                <br>  
                                <button class="edit-btn">Clear All Saved</button>
                            </div>
                        </div>
                    </div>
         <script>
            document.addEventListener("DOMContentLoaded", () => {
                const savedContent = document.querySelector(".saved-content");
                let savedProducts = JSON.parse(localStorage.getItem("savedProducts")) || [];

                function displaySavedProducts() {
                    savedContent.innerHTML = "";

                    if (savedProducts.length === 0) {
                        savedContent.innerHTML = "<p>No saved products yet!</p>";
                        return;
                    }

                    savedProducts.forEach((product, index) => {
                        const productCard = document.createElement("div");
                        productCard.classList.add("product-card");
                        productCard.innerHTML = `
                            <img src="${product.image_link || 'https://via.placeholder.com/200'}" alt="${product.name}">
                            <h2>${product.name}</h2>
                            <p>${product.brand || 'Unknown Brand'}</p>
                            <p>$${product.price || 'N/A'}</p>
                            <button class="delete-btn" data-index="${index}">Delete</button>
                        `;
                        savedContent.appendChild(productCard);
                    });

                    document.querySelectorAll(".delete-btn").forEach(button => {
                        button.addEventListener("click", (e) => {
                            const productIndex = e.target.getAttribute("data-index");
                            deleteSavedProduct(productIndex);
                        });
                    });
                }

                function deleteSavedProduct(index) {
                    savedProducts.splice(index, 1); 
                    localStorage.setItem("savedProducts", JSON.stringify(savedProducts)); 
                    displaySavedProducts(); 
                }

                const editBtn = document.querySelector(".edit-btn");
                editBtn.addEventListener("click", () => {
                    if (confirm("Are you SURE you want to clear all of your saved products?")) {
                        savedProducts = [];
                        localStorage.removeItem("savedProducts");
                        displaySavedProducts();
                    }
                });

                displaySavedProducts();
            });
    </script>
</body>
</html>